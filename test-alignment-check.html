<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .test-section {
            border: 2px solid #ccc;
            margin: 20px 0;
            padding: 20px;
            background: #f9f9f9;
        }

        .preview {
            background: white;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 10px 0;
        }

        textarea {
            width: 100%;
            height: 200px;
            font-family: monospace;
            font-size: 12px;
            padding: 10px;
            border: 1px solid #ccc;
        }

        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 4px;
            margin: 5px;
        }

        button:hover {
            background: #0056b3;
        }

        .result {
            background: #e7f3ff;
            border: 1px solid #0066cc;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <h1>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞</h1>

    <div class="test-section">
        <h2>1. –í—Å—Ç–∞–≤—å—Ç–µ HTML –∏–∑ –∏–º–ø–æ—Ä—Ç–∞</h2>
        <p>–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ DOCX, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ HTML –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞:</p>
        <textarea id="htmlInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ HTML –∑–¥–µ—Å—å..."></textarea>
        <button onclick="analyzeHTML()">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å HTML</button>
    </div>

    <div class="test-section">
        <h2>2. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
        <div id="results"></div>
    </div>

    <div class="test-section">
        <h2>3. –ü—Ä–µ–≤—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∞</h2>
        <div id="preview" class="preview"></div>
    </div>

    <script>
        function analyzeHTML() {
            const html = document.getElementById('htmlInput').value;
            const resultsDiv = document.getElementById('results');
            const previewDiv = document.getElementById('preview');

            if (!html.trim()) {
                resultsDiv.innerHTML = '<p style="color: red;">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—Å—Ç–∞–≤—å—Ç–µ HTML</p>';
                return;
            }

            // –ê–Ω–∞–ª–∏–∑
            const results = [];

            // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ text-align –≤ inline —Å—Ç–∏–ª—è—Ö
            const textAlignRegex = /text-align:\s*(left|center|right|justify)/gi;
            const matches = html.match(textAlignRegex);

            results.push(`<div class="result">
                <strong>‚úì –ù–∞–π–¥–µ–Ω–æ text-align —Å—Ç–∏–ª–µ–π:</strong> ${matches ? matches.length : 0}
                ${matches ? '<br>–ü—Ä–∏–º–µ—Ä—ã: ' + matches.slice(0, 5).join(', ') : ''}
            </div>`);

            // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã —Å–æ —Å—Ç–∏–ª—è–º–∏
            const pWithStyleRegex = /<p[^>]*style="([^"]*)"/gi;
            let pMatches = [];
            let match;
            while ((match = pWithStyleRegex.exec(html)) !== null) {
                pMatches.push(match[1]);
            }

            results.push(`<div class="result">
                <strong>‚úì –ü–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ —Å–æ —Å—Ç–∏–ª—è–º–∏:</strong> ${pMatches.length}
            </div>`);

            // 3. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —Ç–∏–ø –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è
            const leftCount = (html.match(/text-align:\s*left/gi) || []).length;
            const centerCount = (html.match(/text-align:\s*center/gi) || []).length;
            const rightCount = (html.match(/text-align:\s*right/gi) || []).length;
            const justifyCount = (html.match(/text-align:\s*justify/gi) || []).length;

            results.push(`<div class="result">
                <strong>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–π:</strong><br>
                ‚Ä¢ Left: ${leftCount}<br>
                ‚Ä¢ Center: ${centerCount}<br>
                ‚Ä¢ Right: ${rightCount}<br>
                ‚Ä¢ Justify: ${justifyCount}
            </div>`);

            // 4. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 3 –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ —Å –∏—Ö —Å—Ç–∏–ª—è–º–∏
            const first3P = pMatches.slice(0, 3);
            if (first3P.length > 0) {
                results.push(`<div class="result">
                    <strong>–ü–µ—Ä–≤—ã–µ 3 –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞ (—Å—Ç–∏–ª–∏):</strong><br>
                    ${first3P.map((style, i) => `<div style="margin: 5px 0; padding: 5px; background: #fff;">
                        –ü–∞—Ä–∞–≥—Ä–∞—Ñ ${i + 1}: <code>${style}</code>
                    </div>`).join('')}
                </div>`);
            }

            resultsDiv.innerHTML = results.join('');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é
            previewDiv.innerHTML = html;
        }
    </script>
</body>

</html>